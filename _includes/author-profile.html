{% include base_path %}

{% if page.author and site.data.authors[page.author] %}
  {% assign author = site.data.authors[page.author] %}
{% else %}
  {% assign author = site.author %}
{% endif %}

<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    {% if author.avatar contains "://" %}
      <img src="{{ author.avatar }}" alt="{{ author.name }}" fetchpriority="high" />
    {% else %}
      <img src="{{ author.avatar | prepend: "/images/" | prepend: base_path }}"
           class="author__avatar" alt="{{ author.name }}" fetchpriority="high" />
    {% endif %}
  </div>

  <div class="author__content">
    <h3 class="author__name">{{ author.name }}</h3>

    <!-- === contact icons under name === -->
    <div class="author__contact-icons">
      {% if author.googlescholar %}
        <a href="{{ author.googlescholar }}" target="_blank" rel="noopener"
           aria-label="Google Scholar" title="Google Scholar">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L1 7l11 5 9-4.09V17h2V7L12 2z"/>
            <path d="M11 22h2v-6h-2v6z"/>
          </svg>
        </a>
      {% endif %}
      {% if author.github %}
        {% assign _gh = author.github | strip %}
        {% if _gh contains '://' or _gh contains 'github.com' %}
          {% assign ghurl = _gh %}
        {% else %}
          {% assign ghurl = 'https://github.com/' | append: _gh %}
        {% endif %}
        <a href="{{ ghurl }}" target="_blank" rel="noopener"
           aria-label="GitHub" title="GitHub">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 .5C5.73.5.75 5.48.75 11.77c0 4.9 3.16 9.06 7.54 10.53.55.1.75-.24.75-.53v-1.86
              c-3.06.66-3.7-1.28-3.7-1.28-.5-1.28-1.25-1.62-1.25-1.62-1.02-.7.08-.68.08-.68
              1.13.08 1.72 1.16 1.72 1.16 1 .72 2.6.5 3.24.38.1-.78.38-1.28.7-1.58
              -2.44-.28-5-1.22-5-5.42 0-1.2.42-2.18 1.12-2.95-.12-.28-.5-1.4.1-2.92
              0 0 .92-.3 3.02 1.12.88-.24 1.82-.36 2.76-.36.94 0 1.88.12 2.76.36
              2.1-1.42 3.02-1.12 3.02-1.12.6 1.52.22 2.64.1 2.92.7.77 1.12 1.75
              1.12 2.95 0 4.2-2.58 5.14-5.04 5.42.4.36.76 1.06.76 2.14v3.18
              c0 .3.2.64.76.53 4.38-1.48 7.54-5.64 7.54-10.53C23.25 5.48
              18.27.5 12 .5z"/>
          </svg>
        </a>
      {% endif %}
      {% if author.email %}
        <a href="mailto:{{ author.email }}" aria-label="Email" title="Email">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M2 6.5A2.5 2.5 0 014.5 4h15A2.5 2.5 0 0122 6.5v11A2.5
              2.5 0 0119.5 20h-15A2.5 2.5 0 012 17.5v-11zM4.47 6
              12 11.1 19.53 6H4.47z"/>
          </svg>
        </a>
      {% endif %}
    </div>

    {% if author.bio %}<p class="author__bio">{{ author.bio }}</p>{% endif %}
  </div>

  <!-- === employers (universities) === -->
  {% if author.employer %}
  <ul class="author__urls">
    {% for e in author.employer %}
      <li>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 21h18v-2H3v2zm2-4h14V3H5v14zm2-2v-2h2v2H7zm0-4V9h2v2H7zm4
            4v-2h2v2h-2zm0-4V9h2v2h-2z"/>
        </svg>
        {% if e.url %}
          <a href="{{ e.url }}" target="_blank" rel="noopener">{{ e.name }}</a>
        {% else %}
          {{ e.name }}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
  {% endif %}
</div>
