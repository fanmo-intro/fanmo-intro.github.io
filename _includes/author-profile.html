{% include base_path %}

{% if page.author and site.data.authors[page.author] %}
  {% assign author = site.data.authors[page.author] %}
{% else %}
  {% assign author = site.author %}
{% endif %}

<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    {% if author.avatar contains "://" %}
      <img src="{{ author.avatar }}" alt="{{ author.name }}" fetchpriority="high" />
    {% else %}
      <img src="{{ author.avatar | prepend: "/images/" | prepend: base_path }}" class="author__avatar" alt="{{ author.name }}" fetchpriority="high" />
    {% endif %}
  </div>

  <div class="author__content">
    <h3 class="author__name">{{ author.name }}</h3>
    {% if author.pronouns %}<p class="author__pronouns">{{ author.pronouns }}</p>{% endif %}
    {% if author.bio %}<p class="author__bio">{{ author.bio }}</p>{% endif %}
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>

    {# ── Location & employers as text rows ── #}
    <ul class="author__urls">
      {% if author.location %}
        <li class="author__desktop">
          <i class="fas fa-fw fa-location-dot icon-pad-right" aria-hidden="true"></i>{{ author.location }}
        </li>
      {% endif %}

      {% if author.employer %}
        {% assign employers_list = author.employer %}
        {% for e in employers_list %}
          <li class="author__desktop">
            <i class="fas fa-fw fa-building-columns icon-pad-right" aria-hidden="true"></i>
            <span class="employer">{{ e | strip }}</span>
          </li>
        {% endfor %}
      {% endif %}
    </ul>

    {# ── Icon-only row (Scholar, GitHub, LinkedIn, Email) ── #}
    <ul class="author__icons">
      {% if author.googlescholar %}
        <li>
          <a href="{{ author.googlescholar }}" aria-label="Google Scholar" rel="me noopener" target="_blank">
            <i class="ai ai-google-scholar" aria-hidden="true"></i>
          </a>
        </li>
      {% endif %}

      {% if author.github %}
        <li>
          <a href="https://github.com/{{ author.github }}" aria-label="GitHub" rel="me noopener" target="_blank">
            <i class="fab fa-github" aria-hidden="true"></i>
          </a>
        </li>
      {% endif %}

      {% if author.linkedin %}
        <li>
          <a href="https://www.linkedin.com/in/{{ author.linkedin }}" aria-label="LinkedIn" rel="me noopener" target="_blank">
            <i class="fab fa-linkedin" aria-hidden="true"></i>
          </a>
        </li>
      {% endif %}

      {% if author.email %}
        <li>
          <a href="mailto:{{ author.email }}" aria-label="Email">
            <i class="fas fa-envelope" aria-hidden="true"></i>
          </a>
        </li>
      {% endif %}
    </ul>
  </div>
</div>
